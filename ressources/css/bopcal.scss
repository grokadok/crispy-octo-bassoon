.bopcal {
    --bigcal-height: 54rem;
    --day-height: 96rem;
    --cal-width: 20rem;
    position: fixed;
    inset: auto auto 0 0;
    width: var(--cal-width);
    display: flex;
    flex-direction: column;
    background-color: var(--bg-chat);
    transform: translateX(calc(-1 * var(--cal-width)));
    transition: transform var(--transition-global);
    z-index: 1;
    & ul {
        padding: 0;
    }
    & > button {
        position: absolute;
        inset: 0 0 auto auto;
        width: 5.5rem;
        padding: 0.2rem 0.4rem;
        border-radius: 5px 5px 0 0;
        transform: rotate(90deg) translate(0, -5.5rem);
        transform-origin: left bottom;
        transition: transform var(--transition-global),
            width var(--transition-global);
        z-index: 10;
    }
    & > div {
        /* menu */
        &:first-of-type {
            /* position: absolute;
            inset: 0 0 auto 0; */
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
            z-index: 2;
            & button {
                background-color: transparent;
                padding: 0.5rem;
            }
            /* calendar list */
            & > ul {
                /* position: relative; */
                & > li {
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    background-color: var(--bg-chat);
                    opacity: 1;
                    & > span {
                        cursor: pointer;
                        transform: scale(1);
                        transition: transform var(--transition-global);
                    }
                    &.active {
                        font-weight: bolder;
                    }
                    &:hover > span {
                        transform: scale(1.05);
                    }
                    /* pointer-events: none;
                    transition: opacity var(--transition-global); */
                }
                /* &:hover {
                    & > li {
                        opacity: 1;
                        pointer-events: all;
                    }
                } */
            }
        }
        /* mini cal */
        &:nth-of-type(2),
        /* big cal calendar */
        &:last-of-type > div:last-of-type {
            height: 14rem;
            overflow-y: scroll;
            scrollbar-width: none;
            scroll-snap-type: both mandatory;
            &::-webkit-scrollbar {
                display: none;
            }
            /* year */
            & [data-year] {
                display: flex;
                flex-direction: column;
            }
            /* month */
            & [data-month] {
                position: relative;
                height: 14rem;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                scroll-snap-align: start;
                scroll-snap-stop: always;
                &::after {
                    content: attr(data-month);
                    position: absolute;
                    inset: 0 auto 0 0;
                    padding: calc((50% - 7rem - 1.2rem) / 2);
                    color: var(--accent-secondary);
                    font-size: 1.2rem;
                    writing-mode: vertical-lr;
                    cursor: pointer;
                    text-align: center;
                    transform: rotate(180deg);
                }
                &.hidden {
                    display: none;
                }
            }
            /* week */
            & [data-week] {
                position: relative;
                width: 14rem;
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                &::after {
                    content: attr(data-week);
                    position: absolute;
                    left: -0.3rem;
                    padding: 0.2rem 0.5rem 0.2rem 14.8rem;
                    background-color: rgba(87, 140, 190, 0.322);
                    border-radius: 5px;
                    color: var(--gray2);
                    font-weight: bold;
                    cursor: pointer;
                    opacity: 0;
                    transition: opacity var(--transition-global);
                }
                &:hover::after {
                    opacity: 1;
                }
            }
            /* day */
            & [data-date] {
                position: relative;
                height: 2rem;
                aspect-ratio: 1 / 1;
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1;
                &::after {
                    content: attr(data-date);
                    position: absolute;
                    cursor: pointer;
                    transform: scale(1);
                    transition: color var(--transition-global),
                        transform var(--transition-global);
                }
                &.today {
                    background-color: var(--bg);
                }
                &.fade {
                    color: var(--text-fade);
                }
                &:hover {
                    outline: dashed var(--accent-secondary);
                    &::after {
                        color: var(--text-highlight);
                        transform: scale(1.1);
                    }
                }
            }
        }
        /* mini cal */
        &:nth-of-type(2) {
            /* everything in day */
            & [data-date] * {
                display: none;
            }
        }
        /* big cal */
        &:last-of-type {
            --allday-height: 0rem;
            --info-height: 2rem;
            --info-width: 4rem;
            position: absolute;
            left: 100%;
            bottom: 0;
            height: var(--bigcal-height);
            width: calc(100vw - var(--cal-width));
            border-radius: 9px 9px 9px 0;
            box-shadow: 2px 2px 0 1px var(--text);
            /* padding-top: var(--allday-height); */
            background-color: var(--bg-chat);
            opacity: 0;
            overflow: hidden;
            transition: opacity var(--transition-global),
                width var(--transition-global), height var(--transition-global);
            pointer-events: none;
            /* layout */
            & > div:first-of-type {
                position: absolute;
                inset: calc(var(--info-height) + var(--allday-height)) 0 0 0;
                overflow: scroll;
                z-index: 2;
                pointer-events: none;
                & > div {
                    position: absolute;
                    inset: 0 0 auto 0;
                    height: var(--day-height);
                    display: flex;
                    flex-direction: column;
                    background: linear-gradient(
                        90deg,
                        var(--bg-chat) 0%,
                        rgba(0, 0, 0, 0) 5rem
                    );
                    pointer-events: none;
                    /* hour */
                    & > div {
                        flex: 1;
                        background-image: repeating-linear-gradient(
                            var(--text-secondary) 0 0.1px,
                            transparent 1px 100%
                        );
                        padding: 0.4rem;
                        &::after {
                            content: attr(data-hour);
                            color: var(--accent-secondary);
                        }
                    }
                }
            }
            /* week info */
            & > div:nth-of-type(2) {
                position: absolute;
                inset: 0 auto auto 0;
                width: var(--info-width);
                height: var(--info-height);
                border-radius: 9px 0 0 0;
                display: flex;
                justify-content: center;
                align-items: center;
                background-color: var(--accent-secondary);
                cursor: pointer;
                z-index: 3;
                & > span {
                    color: var(--text);
                    font-size: 1.3rem;
                    font-weight: lighter;
                    scale: 1;
                    transition: scale var(--transition-pages);
                }
                &:hover > span {
                    scale: 1.1;
                }
            }
            /* calendar */
            & > div:last-of-type {
                height: 100%;
                width: calc(100vw - var(--cal-width));
                display: flex;
                /* month */
                & [data-month] {
                    height: 100%;
                }
                /* day children */
                & [data-date] > div {
                    position: relative;
                    /* date info */
                    &:first-of-type {
                        position: sticky;
                        top: 0;
                        background-color: var(--bg-chat);
                        z-index: 1;
                    }
                    /* all day */
                    &:nth-of-type(2) {
                        position: sticky;
                        top: var(--info-height);
                        background-color: var(--bg-chat);
                    }
                    /* regular event */
                    &:last-of-type > div {
                        position: absolute;
                        width: 100%;
                        border-radius: 5px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        overflow: scroll;
                        user-select: none;
                        /* handles */
                        & > div {
                            position: absolute;
                            display: none;
                            height: 0.5rem;
                            width: 100%;
                            cursor: row-resize;
                            opacity: 0;
                            z-index: 1;
                            /* top handle */
                            &:first-of-type {
                                top: 0;
                            }
                            /* bottom handle */
                            &:last-of-type {
                                bottom: 0;
                            }
                        }
                        & > span {
                            filter: brightness(1.5);
                            /* hour */
                            &:first-of-type {
                                position: absolute;
                                display: none;
                                inset: 0;
                            }
                            &:last-of-type {
                                font-variant: small-caps;
                            }
                        }
                        &.clone {
                            background: transparent;
                            outline: dashed 0.4rem;
                            pointer-events: none; /* otherwise prevents dblclick event */
                        }
                        &.hide {
                            display: none;
                        }
                    }
                }
            }
            &.year {
            }
            &.month {
                height: var(--bigcal-height);
                /* layout */
                & > div:first-of-type {
                    display: none;
                }
                /* week info */
                & > div:nth-of-type(2) {
                    display: none;
                }
                /* calendar */
                & > div:last-of-type {
                    height: 100%;
                    flex-direction: column;
                    /* month */
                    & [data-month] {
                        height: var(--bigcal-height);
                        /* height: calc(100vh - 5rem); */
                        &::after {
                            padding: 1rem;
                            pointer-events: none;
                            transform: rotate(0deg);
                            writing-mode: unset;
                            z-index: 1;
                        }
                    }
                    /* week */
                    & [data-week] {
                        width: 100%;
                        flex: 1;
                        justify-content: space-around;
                        &::after {
                            display: none;
                        }
                    }
                    /* day */
                    & [data-date] {
                        flex-direction: column;
                        justify-content: space-around;
                        overflow: auto;
                        height: 100%;
                        border: inset var(--text-placeholder) 1px;
                        /* regular event */
                        & > div:nth-of-type(2) > div {
                            position: static;
                            width: 5rem;
                            height: 1rem;
                        }
                    }
                }
            }
            &.week,
            &.day {
                /* calendar */
                & > div:last-of-type {
                    scroll-snap-type: x mandatory;
                    /* year */
                    & [data-year] {
                        flex-direction: row;
                        height: calc(
                            var(--day-height) + var(--allday-height) +
                                var(--info-height)
                        );
                    }
                    /* month */
                    & [data-month] {
                        flex-direction: row;
                        scroll-snap-align: none;
                        &::after {
                            display: none;
                        }
                    }
                    /* week */
                    & [data-week] {
                        width: auto;
                        &::after {
                            opacity: 0;
                        }
                    }
                    /* day */
                    & [data-date] {
                        width: clamp(
                            100px,
                            calc(
                                (100vw - var(--info-width) - var(--cal-width)) /
                                    7
                            ),
                            20rem
                        );
                        height: auto;
                        display: flex;
                        flex-direction: column;
                        border-left: 1px var(--text-placeholder) inset;
                        /* aspect-ratio: auto; */
                        scroll-snap-align: start;
                        scroll-margin-left: var(--info-width);
                        & > div {
                            width: 100%;
                            /* day info */
                            &:first-of-type {
                                height: var(--info-height);
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                border-bottom: inset;
                                border-color: var(--accent-secondary);
                                color: var(--accent-secondary);
                                cursor: pointer;
                                & > span {
                                    font-weight: bolder;
                                    letter-spacing: 0.3rem;
                                    scale: 1;
                                    text-transform: capitalize;
                                    transition: scale var(--transition-global);
                                }
                                &:hover > span {
                                    scale: 1.05;
                                }
                                /* &::after {
                                    content: "";
                                    position: absolute;
                                    inset: 0;
                                    background-color: lime;
                                    z-index: 5;
                                } */
                            }
                            /* all day */
                            &:nth-of-type(2) {
                                height: var(--allday-height);
                                /* all day event */
                                & > div {
                                    height: 1rem;
                                    &.start {
                                        /* round left end */
                                    }
                                    &.end {
                                        /* round right end */
                                    }
                                }
                            }
                            /* regular */
                            &:last-of-type {
                                height: var(--day-height);
                                /* background: repeating-linear-gradient(
                                    var(--text-fade) 0px,
                                    transparent 2px,
                                    transparent calc(var(--day-height) / 24)
                                ); */
                                /* regular event */
                                & > div {
                                    &.start > div:first-of-type,
                                    &.start > span:first-of-type {
                                        display: block;
                                    }
                                    &.end > div:last-of-type {
                                        display: block;
                                    }
                                }
                            }
                        }
                        &::after {
                            content: "";
                        }
                        &:hover {
                            outline: none;
                        }
                        &.today {
                            background-color: transparent;
                        }
                        &.fade {
                            display: none;
                        }
                    }
                }
            }
            /* day */
            /* &.week [data-date] {
                width: clamp(
                    100px,
                    calc((100vw - var(--cal-width)) / 7),
                    20rem
                );
            } */
            /* day */
            &.day > div:last-of-type [data-date] {
                width: calc(100vw - var(--cal-width) - 4rem);
            }
            &.locked {
                opacity: 1;
                pointer-events: all;
            }
        }
    }
    &:hover {
        & > button {
            transform: rotate(90deg) translate(0, -5.5rem) scale(1.05);
        }
    }
    &.toggle {
        transform: translateX(0);
        & > button {
            width: 100%;
            border-radius: 0 5px 0 0;
            transform: rotate(0) translate(0, -100%);
        }
        /* &:hover > div:last-of-type {
            opacity: 1;
        } */
    }
}
